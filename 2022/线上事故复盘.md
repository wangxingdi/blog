---
title: "线上事故复盘"
slug: "online-accident-retrospective"
categories: ["TECH"]
date: 2022-01-27T15:56:41+08:00
draft: false
---

##  动态日志级别上线事故

时间：2022年01月24日

事由：为了在不重启服务的情况下，方便快速的改变log4j日志的日志等级，引入了一种类似ZK的动态配置组件。经过本地和预发环境的测试，均无异常情况。上线后，在压测量很少的情况下，造成大面积服务器无心跳，从而引发线上事故。

复盘：

* 当天任务当天上线，务必对这几个字保持十分的警惕，第一反应应该是：不建议这么做；
* 上线前应当对上线内容的影响范围进行全面评估，以判断是否需要进行压测；

